# 添加公告数据 - 简化版

## ✅ 现在添加数据更简单了！

已优化数据库配置，**时间字段自动生成**，您只需要填写必要的业务字段即可。

---

## 📝 最简数据示例

### 1. 普通公告（只在列表显示）

```json
{
  "title": "本周营业时间调整",
  "content": "本周六营业时间调整为 9:00-18:00"
}
```

**说明**：
- 只填写标题和内容
- `is_published` 默认为 `true`（自动发布）
- `is_popup` 默认为 `false`（不弹窗）
- `create_time` 和 `update_time` 自动生成当前时间

---

### 2. 弹窗公告（登录后自动弹出）

```json
{
  "title": "入院须知",
  "content": "1. 院内严禁吸烟，违者罚款1000元\n\n2. 卸完货请点击完成并上传照片\n\n3. 单据在拐角处一楼第三个房间办公室签字",
  "is_popup": true
}
```

**说明**：
- 添加 `"is_popup": true` 即可实现弹窗
- 其他字段自动处理

---

### 3. HTML 格式公告（支持富文本）

```json
{
  "title": "重要通知",
  "content": "<div style='line-height: 1.8;'><p><strong style='color: red;'>紧急通知：</strong></p><p>今日下午 3-5 点设备维护，暂停服务</p><ul><li>请提前安排装卸时间</li><li>有疑问请联系管理员</li></ul></div>",
  "is_popup": true
}
```

**说明**：
- `content` 支持 HTML 标签
- 可以使用样式、列表、加粗等格式

---

### 4. 草稿（暂不发布）

```json
{
  "title": "下周新规则",
  "content": "内容编辑中...",
  "is_published": false
}
```

**说明**：
- `"is_published": false` 表示不发布
- 用户不会看到这条公告
- 编辑完成后改为 `true` 即可发布

---

## 📋 字段说明总览

| 字段 | 是否必填 | 默认值 | 说明 |
|------|---------|--------|------|
| `title` | ✅ 必填 | - | 公告标题 |
| `content` | ✅ 必填 | - | 公告内容（支持 HTML） |
| `is_published` | ❌ 可选 | `true` | 是否发布（`false` = 隐藏） |
| `is_popup` | ❌ 可选 | `false` | 是否弹窗（`true` = 登录后弹窗） |
| `create_time` | ❌ 自动生成 | 当前时间 | 创建时间戳 |
| `update_time` | ❌ 自动生成 | 当前时间 | 更新时间戳 |
| `user_id` | ❌ 可选 | - | 发布人ID（云函数创建时自动填充） |

---

## 🚀 添加步骤

1. 打开 **HBuilderX → uniCloud → 云数据库**
2. 选择 `notices` 表
3. 点击 **"添加记录"**
4. 粘贴上面的 JSON 数据（选择对应的场景）
5. 点击 **"确定"**

✅ 完成！公告会立即生效。

---

## 💡 常见场景快速参考

### 场景1：发布一条普通公告
```json
{
  "title": "公告标题",
  "content": "公告内容"
}
```

### 场景2：发布紧急弹窗通知
```json
{
  "title": "紧急通知",
  "content": "通知内容",
  "is_popup": true
}
```

### 场景3：暂存草稿
```json
{
  "title": "草稿标题",
  "content": "草稿内容",
  "is_published": false
}
```

### 场景4：下线旧公告
在已有公告记录中，将 `is_published` 改为 `false` 即可。

---

## ⚠️ 注意事项

1. **时间戳不再需要手动填写**，数据库会自动生成
2. **删除旧数据时注意**：如果之前手动填写了时间戳，新数据会自动覆盖
3. **修改公告时**：`update_time` 会自动更新为当前时间
4. **弹窗规则**：每个用户只会看到一次，点击"我已知晓"后永不再弹

---

## 🎯 总结

**现在添加公告只需要 2 步**：
1. 填写 `title`（标题）
2. 填写 `content`（内容）

**可选配置**：
- 需要弹窗？加上 `"is_popup": true`
- 暂不发布？加上 `"is_published": false`

**其他字段全部自动生成！** 🎉
