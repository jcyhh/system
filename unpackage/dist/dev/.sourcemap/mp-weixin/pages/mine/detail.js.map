{"version":3,"file":"detail.js","sources":["pages/mine/detail.vue","pages/mine/detail.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"pl30 pr30 pt30\">\n\t\t\n\t\t<view class=\"flex jc pt60\" v-if=\"!detailData\">\n\t\t\t<image src=\"@/static/imgs/nodata.png\" class=\"img200\"></image>\n\t\t</view>\n\t\t<view class=\"tc size26 gray mt30\" v-if=\"!detailData\">暂无数据～</view>\n\t\t\n\t\t<template v-if=\"detailData\">\n\t\t\t<view class=\"card\">\n\t\t\t\t<view class=\"flex ac\">\n\t\t\t\t\t<view class=\"line mr20\"></view>\n\t\t\t\t\t<view class=\"size30 bold\">用户信息</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"mt40 flex ac size28\">\n\t\t\t\t\t<view class=\"grey\">姓名：</view>\n\t\t\t\t\t<view class=\"flex ac\" @click=\"copy(detailData.driver_name)\">\n\t\t\t\t\t\t<view>{{ detailData.driver_name }}</view>\n\t\t\t\t\t\t<image src=\"@/static/imgs/copy.png\" class=\"img38 ml10\"></image>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"mt30 flex ac size28\">\n\t\t\t\t\t<view class=\"grey\">电话：</view>\n\t\t\t\t\t<view class=\"flex ac\" @click=\"copy(detailData.phone)\">\n\t\t\t\t\t\t<view>{{ detailData.phone }}</view>\n\t\t\t\t\t\t<image src=\"@/static/imgs/copy.png\" class=\"img38 ml10\"></image>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"mt30 flex ac size28\">\n\t\t\t\t\t<view class=\"grey\">装卸车：</view>\n\t\t\t\t\t<view class=\"flex ac\" v-if=\"detailData.operation_type === 0\">\n\t\t\t\t\t\t<view>装车</view>\n\t\t\t\t\t\t<image src=\"/static/imgs/6.png\" class=\"img48 ml10\"></image>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"flex ac\" v-else>\n\t\t\t\t\t\t<view>卸车</view>\n\t\t\t\t\t\t<image src=\"/static/imgs/5.png\" class=\"img48 ml10\"></image>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"card mt30\" v-if=\"detailData.operation_type === 1 && detailData.loading_province\" @click=\"copy(detailData.loading_province + detailData.loading_address)\">\n\t\t\t\t<view class=\"flex jb ac\">\n\t\t\t\t\t<view class=\"flex ac\">\n\t\t\t\t\t\t<view class=\"line mr20\"></view>\n\t\t\t\t\t\t<view class=\"size30 bold\">装车地点</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<image src=\"/static/imgs/copy.png\" class=\"img38\"></image>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<view class=\"flex ac mt40\">\n\t\t\t\t\t<uni-icons type=\"location-filled\" :size=\"40\"></uni-icons>\n\t\t\t\t\t<view class=\"ml20\">\n\t\t\t\t\t\t<view class=\"size30\">{{ detailData.loading_province }}</view>\n\t\t\t\t\t\t<view class=\"size26 mt10 grey\">{{ detailData.loading_address }}</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"card mt30\">\n\t\t\t\t<view class=\"flex ac\">\n\t\t\t\t\t<view class=\"line mr20\"></view>\n\t\t\t\t\t<view class=\"size30 bold\">车辆信息</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"mt40 flex ac size28\">\n\t\t\t\t\t<view class=\"grey\">车牌号：</view>\n\t\t\t\t\t<view class=\"flex ac\" @click=\"copy(detailData.plate_number)\">\n\t\t\t\t\t\t<view>{{ detailData.plate_number }}</view>\n\t\t\t\t\t\t<image src=\"@/static/imgs/copy.png\" class=\"img38 ml10\"></image>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"mt30 flex ac size28\">\n\t\t\t\t\t<view class=\"grey\">车型：</view>\n\t\t\t\t\t<view class=\"flex ac\">\n\t\t\t\t\t\t<view>{{ detailData.truck_type }}</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"mt30 flex ac size28\">\n\t\t\t\t\t<view class=\"grey\">到达时间：</view>\n\t\t\t\t\t<view class=\"flex ac\">\n\t\t\t\t\t\t<view>{{ formatTime(detailData.create_time) }}</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"mt30 flex ac size28\" v-if=\"detailData.complete_time\">\n\t\t\t\t\t<view class=\"grey\">完成时间：</view>\n\t\t\t\t\t<view class=\"flex ac\">\n\t\t\t\t\t\t<view>{{ formatTime(detailData.complete_time) }}</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"mt30 flex ac size28\">\n\t\t\t\t\t<view class=\"grey\">状态：</view>\n\t\t\t\t\t<view class=\"flex ac\">\n\t\t\t\t\t\t<view :class=\"{\n\t\t\t\t\t\t\t'main': detailData.status === 1,\n\t\t\t\t\t\t\t'grey': detailData.status === 0,\n\t\t\t\t\t\t\t'': detailData.status === 2\n\t\t\t\t\t\t}\">\n\t\t\t\t\t\t\t{{ statusText }}\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"flex mt40\">\n\t\t\t\t\t<view class=\"flex col jc ac flex1\" @click=\"viewImg(detailData.photo)\" v-if=\"detailData.photo\">\n\t\t\t\t\t\t<image :src=\"detailData.photo\" mode=\"aspectFill\" class=\"cover\"></image>\n\t\t\t\t\t\t<view class=\"size24 gray mt10\">到达照片</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<view class=\"flex col jc ac flex1\" @click=\"viewImg(detailData.complete_photo)\" v-if=\"detailData.complete_photo\">\n\t\t\t\t\t\t<image :src=\"detailData.complete_photo\" mode=\"aspectFill\" class=\"cover\"></image>\n\t\t\t\t\t\t<view class=\"size24 gray mt10\">完成照片</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</template>\n\t\t\n\t</view>\n</template>\n\n<script lang=\"ts\" setup>\nimport { ref, computed } from 'vue';\nimport { onLoad } from '@dcloudio/uni-app';\n\nconst detailData = ref<any>(null)\n\n// 状态文本\nconst statusText = computed(() => {\n\tif (!detailData.value) return ''\n\tconst statusMap = {\n\t\t0: '排队中',\n\t\t1: '处理中',\n\t\t2: '已完成'\n\t}\n\treturn statusMap[detailData.value.status] || ''\n})\n\n// 加载详情数据\nconst loadDetail = async (id: string) => {\n\ttry {\n\t\tuni.showLoading({ title: '加载中...' })\n\t\tconst truckObj = uniCloud.importObject('truck')\n\t\tconst res = await truckObj.getDetail({ id })\n\t\t\n\t\tuni.hideLoading()\n\t\tif (res.errCode === 0) {\n\t\t\tdetailData.value = res.data\n\t\t} else {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: res.errMsg || '获取失败',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t}\n\t} catch (e: any) {\n\t\tuni.hideLoading()\n\t\tuni.__f__('error','at pages/mine/detail.vue:153','获取详情失败：', e)\n\t\tuni.showToast({\n\t\t\ttitle: e.message || '获取失败',\n\t\t\ticon: 'none'\n\t\t})\n\t}\n}\n\n// 格式化时间\nconst formatTime = (timestamp: number) => {\n\tif (!timestamp) return ''\n\tconst date = new Date(timestamp)\n\tconst year = date.getFullYear()\n\tconst month = String(date.getMonth() + 1).padStart(2, '0')\n\tconst day = String(date.getDate()).padStart(2, '0')\n\tconst hour = String(date.getHours()).padStart(2, '0')\n\tconst minute = String(date.getMinutes()).padStart(2, '0')\n\tconst second = String(date.getSeconds()).padStart(2, '0')\n\treturn `${year}-${month}-${day} ${hour}:${minute}:${second}`\n}\n\n// 查看图片\nconst viewImg = (url: string) => {\n\tif (!url) return\n\tuni.previewImage({\n\t\turls: [url]\n\t})\n}\n\n// 复制文本\nconst copy = (text: string) => {\n\tuni.setClipboardData({\n\t\tdata: text\n\t})\n}\n\n// 页面加载\nonLoad((options: any) => {\n\tif (options.id) {\n\t\tloadDetail(options.id)\n\t} else {\n\t\tuni.showToast({\n\t\t\ttitle: '缺少ID参数',\n\t\t\ticon: 'none'\n\t\t})\n\t}\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.line{\n\twidth: 8rpx;\n\theight: 30rpx;\n\tborder-radius: 4rpx;\n\tbackground-color: $main-color;\n}\n.cover{\n\twidth: 200rpx;\n\theight: 200rpx;\n\tborder-radius: 20rpx;\n}\n</style>\n","import MiniProgramPage from '/Users/jcy/code/wx/system/pages/mine/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","computed","uni","uniCloud","onLoad"],"mappings":";;;;;;;;;;;;;;AAyHM,UAAA,aAAaA,kBAAS,IAAI;AAG1B,UAAA,aAAaC,cAAAA,SAAS,MAAM;AACjC,UAAI,CAAC,WAAW;AAAc,eAAA;AAC9B,YAAM,YAAY;AAAA,QACjB,GAAG;AAAA,QACH,GAAG;AAAA,QACH,GAAG;AAAA,MAAA;AAEJ,aAAO,UAAU,WAAW,MAAM,MAAM,KAAK;AAAA,IAAA,CAC7C;AAGK,UAAA,aAAa,OAAO,OAAe;AACpC,UAAA;AACHC,sBAAAA,MAAI,YAAY,EAAE,OAAO,SAAU,CAAA;AAC7B,cAAA,WAAWC,cAAAA,GAAS,aAAa,OAAO;AAC9C,cAAM,MAAM,MAAM,SAAS,UAAU,EAAE,GAAI,CAAA;AAE3CD,sBAAA,MAAI,YAAY;AACZ,YAAA,IAAI,YAAY,GAAG;AACtB,qBAAW,QAAQ,IAAI;AAAA,QAAA,OACjB;AACNA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO,IAAI,UAAU;AAAA,YACrB,MAAM;AAAA,UAAA,CACN;AAAA,QACF;AAAA,eACQ,GAAQ;AAChBA,sBAAA,MAAI,YAAY;AAChBA,sBAAA,MAAI,MAAM,SAAQ,gCAA+B,WAAW,CAAC;AAC7DA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO,EAAE,WAAW;AAAA,UACpB,MAAM;AAAA,QAAA,CACN;AAAA,MACF;AAAA,IAAA;AAIK,UAAA,aAAa,CAAC,cAAsB;AACzC,UAAI,CAAC;AAAkB,eAAA;AACjB,YAAA,OAAO,IAAI,KAAK,SAAS;AACzB,YAAA,OAAO,KAAK;AACZ,YAAA,QAAQ,OAAO,KAAK,SAAA,IAAa,CAAC,EAAE,SAAS,GAAG,GAAG;AACnD,YAAA,MAAM,OAAO,KAAK,QAAS,CAAA,EAAE,SAAS,GAAG,GAAG;AAC5C,YAAA,OAAO,OAAO,KAAK,SAAU,CAAA,EAAE,SAAS,GAAG,GAAG;AAC9C,YAAA,SAAS,OAAO,KAAK,WAAY,CAAA,EAAE,SAAS,GAAG,GAAG;AAClD,YAAA,SAAS,OAAO,KAAK,WAAY,CAAA,EAAE,SAAS,GAAG,GAAG;AACjD,aAAA,GAAG,IAAI,IAAI,KAAK,IAAI,GAAG,IAAI,IAAI,IAAI,MAAM,IAAI,MAAM;AAAA,IAAA;AAIrD,UAAA,UAAU,CAAC,QAAgB;AAChC,UAAI,CAAC;AAAK;AACVA,oBAAAA,MAAI,aAAa;AAAA,QAChB,MAAM,CAAC,GAAG;AAAA,MAAA,CACV;AAAA,IAAA;AAII,UAAA,OAAO,CAAC,SAAiB;AAC9BA,oBAAAA,MAAI,iBAAiB;AAAA,QACpB,MAAM;AAAA,MAAA,CACN;AAAA,IAAA;AAIFE,kBAAA,OAAO,CAAC,YAAiB;AACxB,UAAI,QAAQ,IAAI;AACf,mBAAW,QAAQ,EAAE;AAAA,MAAA,OACf;AACNF,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACN;AAAA,MACF;AAAA,IAAA,CACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrMD,GAAG,WAAW,eAAe;"}