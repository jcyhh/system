{"version":3,"file":"apply.js","sources":["pages/home/apply.vue","pages/home/apply.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"pl30 pr30 pt30\">\n\t\t\n\t\t<view class=\"size30 mb20\">姓名</view>\n\t\t<view class=\"card flex\">\n\t\t\t<input type=\"text\" v-model=\"formData.driver_name\" placeholder=\"请输入姓名\" class=\"flex1 size28\" />\n\t\t</view>\n\t\t\n\t\t<view class=\"size30 mb20 mt30\">手机号</view>\n\t\t<view class=\"card flex\">\n\t\t\t<input type=\"number\" v-model=\"formData.phone\" placeholder=\"请输入手机号\" class=\"flex1 size28\" maxlength=\"11\" />\n\t\t</view>\n\t\t\n\t\t<view class=\"size30 mb20 mt30\">车牌号</view>\n\t\t<view class=\"card flex\">\n\t\t\t<input type=\"text\" v-model=\"formData.plate_number\" placeholder=\"请输入车牌号\" class=\"flex1 size28\" />\n\t\t</view>\n\t\t\n\t<view class=\"size30 mb20 mt30\">车型</view>\n\t<picker @change=\"typesChange\" :value=\"typeCur\" :range=\"types\">\n\t\t<view class=\"card flex jb ac\">\n\t\t\t<view class=\"size28\">{{types[typeCur]}}</view>\n\t\t\t<uni-icons type=\"down\" :size=\"20\" color=\"#999999\"></uni-icons>\n\t\t</view>\n\t</picker>\n\t\t\n\t\t<view class=\"size30 mb20 mt30\">装卸车</view>\n\t\t<view class=\"flex ac\">\n\t\t\t<view class=\"flex ac\" @click=\"formData.operation_type=0\">\n\t\t\t\t<uni-icons type=\"checkbox-filled\" :size=\"30\" color=\"#29156a\" v-if=\"formData.operation_type==0\"></uni-icons>\n\t\t\t\t<uni-icons type=\"circle\" :size=\"30\" color=\"#999999\" v-else></uni-icons>\n\t\t\t\t<view class=\"ml10 size28\" :class=\"formData.operation_type==0?'main':''\">装车</view>\n\t\t\t</view>\n\t\t\t<view class=\"flex ac ml100\" @click=\"formData.operation_type=1\">\n\t\t\t\t<uni-icons type=\"checkbox-filled\" :size=\"30\" color=\"#29156a\" v-if=\"formData.operation_type==1\"></uni-icons>\n\t\t\t\t<uni-icons type=\"circle\" :size=\"30\" color=\"#999999\" v-else></uni-icons>\n\t\t\t\t<view class=\"ml10 size28\" :class=\"formData.operation_type==1?'main':''\">卸车</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<view class=\"mt30\" v-if=\"formData.operation_type==1\">\n\t\t\t<view class=\"size30 mb20\">装货省份</view>\n\t\t\t<view class=\"card flex jb ac\" @click=\"cityRef?.show()\">\n\t\t\t\t<view class=\"size28\" v-if=\"cityName\">{{ cityName }}</view>\n\t\t\t\t<view class=\"gray size28\" v-else>请选择省市区</view>\n\t\t\t\t<uni-icons type=\"down\" :size=\"20\" color=\"#999999\"></uni-icons>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"size30 mb20 mt30\">装货详细地址</view>\n\t\t\t<view class=\"card flex\">\n\t\t\t\t<input type=\"text\" v-model=\"formData.loading_address\" placeholder=\"请补充乡镇、街道等详细地址\" class=\"flex1 size28\" />\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<view class=\"size30 mb20 mt30\">水印相机照片</view>\n\t\t<view class=\"upload flex jc ac\" @click=\"chooseImage\" v-if=\"!formData.photo\">\n\t\t\t<uni-icons type=\"plusempty\" :size=\"50\" color=\"#999999\"></uni-icons>\n\t\t</view>\n\t\t<view class=\"upload rel\" v-else>\n\t\t\t<image :src=\"formData.photo\" mode=\"aspectFill\" class=\"upload-img\"></image>\n\t\t\t<view class=\"del-btn\" @click.stop=\"deleteImage\">\n\t\t\t\t<uni-icons type=\"closeempty\" :size=\"20\" color=\"#FFFFFF\"></uni-icons>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<view class=\"mt100 btn flex jc ac\" @click=\"submit\">{{ isEditMode ? '保存修改' : '提交排队' }}</view>\n\t\t\n\t\t<view class=\"safeBottom\"></view>\n\t</view>\n\t\n\t<view class=\"citypicker\">\n\t\t<uni-data-picker ref=\"cityRef\" placeholder=\"请选择地址\" popup-title=\"请选择城市\" collection=\"opendb-city-china\" field=\"code as value, name as text\" orderby=\"value asc\" :step-searh=\"true\" self-field=\"code\" parent-field=\"parent_code\"\n\t @change=\"onchange\">\n\t    </uni-data-picker>\n\t</view>\n\t\n</template>\n\n<script lang=\"ts\" setup>\nimport { computed, ref } from 'vue';\nimport { onLoad } from '@dcloudio/uni-app';\nimport { useAppStore } from '@/store';\n\nconst appStore = useAppStore()\n\nconst typeCur = ref(0)\nconst types = [\n\t'依维柯',\n\t'3.8米',\n\t'4.2米',\n\t'7.6米',\n\t'9.6米',\n\t'13.5米',\n\t'17.5米及以上'\n]\nconst typesChange = (e:any) => {\n\ttypeCur.value = e.detail.value\n\tformData.value.truck_type = types[e.detail.value]\n}\n\nconst cityRef = ref()\nconst citys = ref<any[]>([])\nconst cityName = computed(()=>{\n\tif(citys.value.length>0){\n\t\tlet str:string[] = []\n\t\tcitys.value.forEach((item)=>{\n\t\t\tstr.push(item.text)\n\t\t})\n\t\treturn str.join('/')\n\t}else{\n\t\treturn ''\n\t}\n})\nconst onchange = (e:any) => {\n\tcitys.value = e.detail.value\n\tformData.value.loading_province = cityName.value\n}\n\n// 表单数据\nconst formData = ref({\n\tdriver_name: '',\n\tphone: '',\n\tplate_number: '',\n\ttruck_type: types[0],\n\toperation_type: 0,  // 0-装车，1-卸车\n\tloading_province: '',\n\tloading_address: '',\n\tphoto: ''\n})\n\n// 当前任务ID（编辑模式）\nconst currentTaskId = ref('')\nconst isEditMode = computed(() => !!currentTaskId.value)\n\n// 查询并回显数据\nconst loadCurrentTask = async () => {\n\t// 未登录不查询\n\tif (!appStore.isLogin) {\n\t\treturn\n\t}\n\t\n\ttry {\n\t\tconst truckObj = uniCloud.importObject('truck')\n\t\tconst res = await truckObj.getCurrentTask()\n\t\t\n\t\tif (res.errCode === 0 && res.data) {\n\t\t\t// 有排队中的申请，回显数据\n\t\t\tconst task = res.data\n\t\t\tcurrentTaskId.value = task._id\n\t\t\t\n\t\t\tformData.value = {\n\t\t\t\tdriver_name: task.driver_name || '',\n\t\t\t\tphone: task.phone || '',\n\t\t\t\tplate_number: task.plate_number || '',\n\t\t\t\ttruck_type: task.truck_type || types[0],\n\t\t\t\toperation_type: task.operation_type || 0,\n\t\t\t\tloading_province: task.loading_province || '',\n\t\t\t\tloading_address: task.loading_address || '',\n\t\t\t\tphoto: task.photo || ''\n\t\t\t}\n\t\t\t\n\t\t\t// 设置车型选择器\n\t\t\tconst typeIndex = types.indexOf(task.truck_type)\n\t\t\tif (typeIndex !== -1) {\n\t\t\t\ttypeCur.value = typeIndex\n\t\t\t}\n\t\t\t\n\t\t\t// 如果有装货省市区，解析并设置\n\t\t\tif (task.loading_province) {\n\t\t\t\tconst provinceArr = task.loading_province.split('/')\n\t\t\t\tcitys.value = provinceArr.map(text => ({ text }))\n\t\t\t}\n\t\t} else {\n\t\t\t// 没有排队中的申请，清空表单\n\t\t\tcurrentTaskId.value = ''\n\t\t\tresetForm()\n\t\t}\n\t} catch (e) {\n\t\tuni.__f__('error','at pages/home/apply.vue:179','查询失败：', e)\n\t}\n}\n\n// 重置表单\nconst resetForm = () => {\n\tformData.value = {\n\t\tdriver_name: '',\n\t\tphone: '',\n\t\tplate_number: '',\n\t\ttruck_type: types[0],\n\t\toperation_type: 0,\n\t\tloading_province: '',\n\t\tloading_address: '',\n\t\tphoto: ''\n\t}\n\ttypeCur.value = 0\n\tcitys.value = []\n}\n\n// 页面加载时查询（只执行一次）\nonLoad(() => {\n\tloadCurrentTask()\n})\n\n// 选择图片\nconst chooseImage = () => {\n\tuni.chooseImage({\n\t\tcount: 1,\n\t\tsizeType: ['compressed'],\n\t\tsourceType: ['album', 'camera'],\n\t\tsuccess: async (res) => {\n\t\t\tconst tempFilePath = res.tempFilePaths[0]\n\t\t\t\n\t\t\tuni.showLoading({\n\t\t\t\ttitle: '上传中...'\n\t\t\t})\n\t\t\t\n\t\t\ttry {\n\t\t\t\t// 上传到云存储\n\t\t\t\tconst uploadRes = await uniCloud.uploadFile({\n\t\t\t\t\tfilePath: tempFilePath,\n\t\t\t\t\tcloudPath: `trucks/${Date.now()}_${Math.random().toString(36).slice(2)}.jpg`\n\t\t\t\t})\n\t\t\t\t\n\t\t\t\tformData.value.photo = uploadRes.fileID\n\t\t\t\tuni.hideLoading()\n\t\t\t\t\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '上传成功',\n\t\t\t\t\ticon: 'success'\n\t\t\t\t})\n\t\t\t} catch (e) {\n\t\t\t\tuni.hideLoading()\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '上传失败',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t\tuni.__f__('error','at pages/home/apply.vue:237','上传失败：', e)\n\t\t\t}\n\t\t}\n\t})\n}\n\n// 删除图片\nconst deleteImage = () => {\n\tformData.value.photo = ''\n}\n\n// 表单验证\nconst validate = () => {\n\tif (!formData.value.driver_name) {\n\t\tuni.showToast({\n\t\t\ttitle: '请输入姓名',\n\t\t\ticon: 'none'\n\t\t})\n\t\treturn false\n\t}\n\t\n\tif (!formData.value.phone) {\n\t\tuni.showToast({\n\t\t\ttitle: '请输入手机号',\n\t\t\ticon: 'none'\n\t\t})\n\t\treturn false\n\t}\n\t\n\tif (!/^1[3-9]\\d{9}$/.test(formData.value.phone)) {\n\t\tuni.showToast({\n\t\t\ttitle: '手机号格式不正确',\n\t\t\ticon: 'none'\n\t\t})\n\t\treturn false\n\t}\n\t\n\tif (!formData.value.plate_number) {\n\t\tuni.showToast({\n\t\t\ttitle: '请输入车牌号',\n\t\t\ticon: 'none'\n\t\t})\n\t\treturn false\n\t}\n\t\n\tif (!formData.value.truck_type) {\n\t\tuni.showToast({\n\t\t\ttitle: '请选择车型',\n\t\t\ticon: 'none'\n\t\t})\n\t\treturn false\n\t}\n\t\n\t// 如果是卸车，必须填写装货地址\n\tif (formData.value.operation_type === 1) {\n\t\tif (!formData.value.loading_province) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '请选择装货省市区',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t\treturn false\n\t\t}\n\t\t\n\t\tif (!formData.value.loading_address) {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '请输入装货详细地址',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t\treturn false\n\t\t}\n\t}\n\t\n\tif (!formData.value.photo) {\n\t\tuni.showToast({\n\t\t\ttitle: '请上传照片',\n\t\t\ticon: 'none'\n\t\t})\n\t\treturn false\n\t}\n\t\n\treturn true\n}\n\n// 申请订阅消息权限\nconst requestSubscribe = () => {\n\treturn new Promise((resolve) => {\n\t\tconst tmplIds = [\n\t\t\t'6dmIz67zTI9aE3PJCTrqK48vFvZOctRJDTnzFx0Wj2M',  // 排队到号通知（提交申请时）\n\t\t\t'dKt-GXFHtyyoN_6Ag-ulck-eafezp1bQ6Sz95QCu6nM',  // 排队进度通知（前面≤3人时）\n\t\t\t'7WbkjjD-w6tc28gX2Gn8-dWCQreta-M-Y5LltkXm3sk'   // 排队成功提醒（变为处理中时）\n\t\t]\n\t\t\n\n\t\tuni.requestSubscribeMessage({\n\t\t\ttmplIds: tmplIds,\n\t\t\tsuccess: (res) => {\n\t\t\t\tuni.__f__('log','at pages/home/apply.vue:333','订阅消息授权结果：', res)\n\t\t\t\t// 记录用户授权的模板\n\t\t\t\tconst acceptedTmpls = []\n\t\t\t\ttmplIds.forEach(id => {\n\t\t\t\t\tif (res[id] === 'accept') {\n\t\t\t\t\t\tacceptedTmpls.push(id)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\tresolve(acceptedTmpls)\n\t\t\t},\n\t\t\tfail: (err) => {\n\t\t\t\tuni.__f__('log','at pages/home/apply.vue:344','订阅消息授权失败：', err)\n\t\t\t\tresolve([]) // 即使失败也继续提交，只是不发送通知\n\t\t\t}\n\t\t})\n\n\t\t\n\n\n\n\t})\n}\n\n// 提交表单\nconst submit = async () => {\n\t// 检查登录状态\n\tif (!appStore.isLogin) {\n\t\tuni.showModal({\n\t\t\ttitle: '提示',\n\t\t\tcontent: '请先登录',\n\t\t\tsuccess: (res) => {\n\t\t\t\tif (res.confirm) {\n\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\turl: '/pages/tabbar/mine'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\treturn\n\t}\n\t\n\t// 验证表单\n\tif (!validate()) {\n\t\treturn\n\t}\n\t\n\t// 申请订阅消息权限（仅在新增时）\n\tlet subscribedTmpls = []\n\tif (!isEditMode.value) {\n\t\tsubscribedTmpls = await requestSubscribe()\n\t}\n\t\n\tuni.showLoading({\n\t\ttitle: isEditMode.value ? '修改中...' : '提交中...'\n\t})\n\t\n\ttry {\n\t\tconst truckObj = uniCloud.importObject('truck')\n\t\tlet res\n\t\t\n\t\tif (isEditMode.value) {\n\t\t\t// 编辑模式，调用更新接口\n\t\t\tres = await truckObj.updateTask({\n\t\t\t\tid: currentTaskId.value,\n\t\t\t\t...formData.value\n\t\t\t})\n\t\t} else {\n\t\t\t// 新增模式，调用注册接口\n\t\t\tres = await truckObj.register({\n\t\t\t\t...formData.value,\n\t\t\t\tsubscribedTmpls: subscribedTmpls // 传递用户授权的模板ID\n\t\t\t})\n\t\t}\n\t\t\n\t\tuni.hideLoading()\n\t\t\n\t\tif (res.errCode === 0) {\n\t\t\tuni.showModal({\n\t\t\t\ttitle: isEditMode.value ? '修改成功' : '登记成功',\n\t\t\t\tcontent: isEditMode.value ? '信息已更新' : '您已登记成功，请耐心等待',\n\t\t\t\tshowCancel: false,\n\t\t\t\tsuccess: () => {\n\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\turl:\"/pages/tabbar/home\"\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t} else {\n\t\t\t// 如果是因为已有排队中/处理中的单子\n\t\t\tif (res.errCode === 400 && res.errMsg.includes('已有')) {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '提示',\n\t\t\t\t\tcontent: res.errMsg + '，是否前往查看？',\n\t\t\t\t\tconfirmText: '去查看',\n\t\t\t\t\tsuccess: (modalRes) => {\n\t\t\t\t\t\tif (modalRes.confirm) {\n\t\t\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\t\t\turl: '/pages/tabbar/home'\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: res.errMsg || (isEditMode.value ? '修改失败' : '登记失败'),\n\t\t\t\t\ticon: 'none',\n\t\t\t\t\tduration: 2000\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t} catch (e:any) {\n\t\tuni.hideLoading()\n\t\tuni.showToast({\n\t\t\ttitle: e.message || '提交失败',\n\t\t\ticon: 'none'\n\t\t})\n\t\tuni.__f__('error','at pages/home/apply.vue:449','提交失败：', e)\n\t}\n}\n</script>\n\n<style lang=\"scss\">\n.upload{\n\twidth: 400rpx;\n\theight: 400rpx;\n\tborder-radius: 20px;\n\tbackground-color: #FFFFFF;\n\toverflow: hidden;\n}\n.upload-img{\n\twidth: 100%;\n\theight: 100%;\n}\n.del-btn{\n\tposition: absolute;\n\tright: 20rpx;\n\ttop: 20rpx;\n\twidth: 60rpx;\n\theight: 60rpx;\n\tborder-radius: 50%;\n\tbackground-color: rgba(0, 0, 0, 0.5);\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n.btn{\n\theight: 88rpx;\n\tborder-radius: 44rpx;\n\tbackground-color: $main-color;\n\tcolor: #FFFFFF;\n}\n.citypicker{\n\tposition: absolute;\n\tleft: -99999rpx;\n}\n</style>","import MiniProgramPage from '/Users/jcy/code/wx/system/pages/home/apply.vue'\nwx.createPage(MiniProgramPage)"],"names":["useAppStore","ref","computed","uniCloud","uni","onLoad","MiniProgramPage"],"mappings":"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"}