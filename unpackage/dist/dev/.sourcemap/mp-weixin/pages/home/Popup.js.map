{"version":3,"file":"Popup.js","sources":["pages/home/Popup.vue","/Users/jcy/code/wx/system/pages/home/Popup.vue?type=component"],"sourcesContent":["<template>\n\t<uni-popup ref=\"popupRef\" type=\"center\" :mask-click=\"false\">\n\t\t<view class=\"pop\">\n\t\t\t<view class=\"flex jb ac\">\n\t\t\t\t<uni-icons type=\"closeempty\" color=\"#FFFFFF\" :size=\"25\"></uni-icons>\n\t\t\t\t<view class=\"size30 bold\">{{ noticeData?.title || '公告' }}</view>\n\t\t\t\t<uni-icons type=\"closeempty\" :size=\"25\" @click=\"close()\"></uni-icons>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"mt30 content size28\" v-html=\"noticeData?.content\"></view>\n\t\t\t\n\t\t\t<view class=\"mt50 btn flex jc ac\" @click=\"submit\">\n\t\t\t\t我已知晓\n\t\t\t</view>\n\t\t</view>\n\t</uni-popup>\n</template>\n\n<script lang=\"ts\" setup>\nimport { ref } from 'vue';\n\nconst popupRef = ref()\nconst noticeData = ref<any>(null)\n\nconst open = (data: any) => {\n\tnoticeData.value = data\n\tpopupRef.value?.open()\n}\n\nconst close = () => {\n\tpopupRef.value?.close()\n}\n\nconst submit = async () => {\n\tif (!noticeData.value?._id) {\n\t\tclose()\n\t\treturn\n\t}\n\n\ttry {\n\t\t// 标记为已读\n\t\tconst noticeObj = uniCloud.importObject('notice')\n\t\tconst res = await noticeObj.markPopupAsRead({\n\t\t\tnoticeId: noticeData.value._id\n\t\t})\n\n\t\tif (res.errCode === 0) {\n\t\t\tclose()\n\t\t} else {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: res.errMsg || '操作失败',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t}\n\t} catch (e: any) {\n\t\tuni.__f__('error','at pages/home/Popup.vue:56','标记已读失败：', e)\n\t\tuni.showToast({\n\t\t\ttitle: e.message || '操作失败',\n\t\t\ticon: 'none'\n\t\t})\n\t}\n}\n\ndefineExpose({\n\topen\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.pop{\n\twidth: 600rpx;\n\tborder-radius: 30rpx;\n\tpadding: 30rpx;\n\tbackground-color: #FFFFFF;\n\tmax-height: 80vh;\n\tdisplay: flex;\n\tflex-direction: column;\n}\n.content {\n\tflex: 1;\n\toverflow-y: auto;\n\tmax-height: 600rpx;\n\tline-height: 1.8;\n\tword-wrap: break-word;\n\twhite-space: pre-wrap;\n}\n.btn{\n\theight: 88rpx;\n\tborder-radius: 44rpx;\n\tbackground-color: $main-color;\n\tcolor: #FFFFFF;\n\tmargin-top: 30rpx;\n\tflex-shrink: 0;\n}\n.btn.disabled{\n\tbackground-color: #CCCCCC;\n}\n</style>","import Component from '/Users/jcy/code/wx/system/pages/home/Popup.vue'\nwx.createComponent(Component)"],"names":["ref","uniCloud","uni"],"mappings":";;;;;;;;;;;;;;;AAqBA,UAAM,WAAWA,cAAAA;AACX,UAAA,aAAaA,kBAAS,IAAI;AAE1B,UAAA,OAAO,CAAC,SAAc;;AAC3B,iBAAW,QAAQ;AACnB,qBAAS,UAAT,mBAAgB;AAAA,IAAK;AAGtB,UAAM,QAAQ,MAAM;;AACnB,qBAAS,UAAT,mBAAgB;AAAA,IAAM;AAGvB,UAAM,SAAS,YAAY;;AACtB,UAAA,GAAC,gBAAW,UAAX,mBAAkB,MAAK;AACrB;AACN;AAAA,MACD;AAEI,UAAA;AAEG,cAAA,YAAYC,cAAAA,GAAS,aAAa,QAAQ;AAC1C,cAAA,MAAM,MAAM,UAAU,gBAAgB;AAAA,UAC3C,UAAU,WAAW,MAAM;AAAA,QAAA,CAC3B;AAEG,YAAA,IAAI,YAAY,GAAG;AAChB;QAAA,OACA;AACNC,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO,IAAI,UAAU;AAAA,YACrB,MAAM;AAAA,UAAA,CACN;AAAA,QACF;AAAA,eACQ,GAAQ;AAChBA,sBAAA,MAAI,MAAM,SAAQ,8BAA6B,WAAW,CAAC;AAC3DA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO,EAAE,WAAW;AAAA,UACpB,MAAM;AAAA,QAAA,CACN;AAAA,MACF;AAAA,IAAA;AAGY,aAAA;AAAA,MACZ;AAAA,IAAA,CACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AChED,GAAG,gBAAgB,SAAS;"}