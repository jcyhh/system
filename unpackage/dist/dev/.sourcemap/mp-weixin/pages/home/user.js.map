{"version":3,"file":"user.js","sources":["pages/home/user.vue","pages/home/user.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"page\">\n\t\t<view class=\"content\" v-if=\"systemInfo\">\n\t\t\t<view class=\"title size36 bold mb30\">{{ systemInfo.title }}</view>\n\t\t\t<rich-text :nodes=\"systemInfo.content\" class=\"rich-content\"></rich-text>\n\t\t</view>\n\t\t<view class=\"empty\" v-else>\n\t\t\t<text class=\"gray\">内容加载中...</text>\n\t\t</view>\n\t</view>\n</template>\n\n<script lang=\"ts\" setup>\nimport { ref } from 'vue'\nimport { onLoad } from '@dcloudio/uni-app'\n\nconst systemInfo = ref<any>(null)\n\n// 加载用户协议\nconst loadSystemInfo = async () => {\n\ttry {\n\t\tconst db = uniCloud.database()\n\t\tconst res = await db.collection('system_info')\n\t\t\t.where({\n\t\t\t\tkey: 'user_agreement',\n\t\t\t\tis_published: true\n\t\t\t})\n\t\t\t.limit(1)\n\t\t\t.get()\n\t\t\n\t\tif (res.result && res.result.data && res.result.data.length > 0) {\n\t\t\tsystemInfo.value = res.result.data[0]\n\t\t} else {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: '暂无内容',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t}\n\t} catch (e) {\n\t\tuni.__f__('error','at pages/home/user.vue:40','加载失败：', e)\n\t\tuni.showToast({\n\t\t\ttitle: '加载失败',\n\t\t\ticon: 'none'\n\t\t})\n\t}\n}\n\nonLoad(() => {\n\tloadSystemInfo()\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.page {\n\tmin-height: 100vh;\n\tbackground-color: #F5F5F5;\n}\n.content {\n\tpadding: 30rpx;\n\tbackground-color: #FFFFFF;\n\tmin-height: 100vh;\n}\n.title {\n\ttext-align: center;\n\tpadding-bottom: 20rpx;\n\tborder-bottom: 1rpx solid #EEEEEE;\n}\n.rich-content {\n\tline-height: 1.8;\n\tfont-size: 28rpx;\n\tcolor: #333333;\n}\n.empty {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tpadding: 100rpx 0;\n}\n</style>\n","import MiniProgramPage from '/Users/jcy/code/wx/system/pages/home/user.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uniCloud","uni","onLoad"],"mappings":";;;;;AAgBM,UAAA,aAAaA,kBAAS,IAAI;AAGhC,UAAM,iBAAiB,YAAY;AAC9B,UAAA;AACG,cAAA,KAAKC,iBAAS;AACpB,cAAM,MAAM,MAAM,GAAG,WAAW,aAAa,EAC3C,MAAM;AAAA,UACN,KAAK;AAAA,UACL,cAAc;AAAA,QACd,CAAA,EACA,MAAM,CAAC,EACP,IAAI;AAEF,YAAA,IAAI,UAAU,IAAI,OAAO,QAAQ,IAAI,OAAO,KAAK,SAAS,GAAG;AAChE,qBAAW,QAAQ,IAAI,OAAO,KAAK,CAAC;AAAA,QAAA,OAC9B;AACNC,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,UAAA,CACN;AAAA,QACF;AAAA,eACQ,GAAG;AACXA,sBAAA,MAAI,MAAM,SAAQ,6BAA4B,SAAS,CAAC;AACxDA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,QAAA,CACN;AAAA,MACF;AAAA,IAAA;AAGDC,kBAAAA,OAAO,MAAM;AACG;IAAA,CACf;;;;;;;;;;;;AChDD,GAAG,WAAW,eAAe;"}