{"version":3,"file":"detail.js","sources":["pages/notice/detail.vue","pages/notice/detail.vue?type=page"],"sourcesContent":["<template>\n\t<view class=\"pl30 pr30 pt30\">\n\t\t\n\t\t<view v-if=\"noticeDetail\">\n\t\t\t<view class=\"size36 bold\">{{ noticeDetail.title }}</view>\n\t\t\t<view class=\"size24 gray mt20\">{{ formatTime(noticeDetail.create_time) }}</view>\n\t\t\t\n\t\t\t<view class=\"line mt30 mb30\"></view>\n\t\t\t\n\t\t\t<view class=\"content size30\" v-html=\"noticeDetail.content\"></view>\n\t\t</view>\n\t\t\n\t\t<view class=\"tc mt100\" v-else-if=\"!isLoading\">\n\t\t\t<view class=\"flex jc\">\n\t\t\t\t<image src=\"@/static/imgs/nodata.png\" class=\"img200\"></image>\n\t\t\t</view>\n\t\t\t<view class=\"size28 gray mt20\">公告不存在</view>\n\t\t</view>\n\t\t\n\t\t<view class=\"tc mt100 size28 gray\" v-if=\"isLoading\">\n\t\t\t加载中...\n\t\t</view>\n\t\t\n\t</view>\n\t\n\t<view class=\"gap50\"></view>\n</template>\n\n<script lang=\"ts\" setup>\nimport { ref } from 'vue';\nimport { onLoad } from '@dcloudio/uni-app';\n\nconst noticeDetail = ref<any>(null)\nconst isLoading = ref(false)\n\n// 加载公告详情\nconst loadNoticeDetail = async (id: string) => {\n\ttry {\n\t\tisLoading.value = true\n\t\t\n\t\tconst noticeObj = uniCloud.importObject('notice')\n\t\tconst res = await noticeObj.getDetail({ id })\n\t\t\n\t\tif (res.errCode === 0) {\n\t\t\tnoticeDetail.value = res.data\n\t\t} else {\n\t\t\tuni.showToast({\n\t\t\t\ttitle: res.errMsg || '获取失败',\n\t\t\t\ticon: 'none'\n\t\t\t})\n\t\t}\n\t} catch (e: any) {\n\t\tuni.__f__('error','at pages/notice/detail.vue:53','获取失败：', e)\n\t\tuni.showToast({\n\t\t\ttitle: e.message || '获取失败',\n\t\t\ticon: 'none'\n\t\t})\n\t} finally {\n\t\tisLoading.value = false\n\t}\n}\n\n// 格式化时间\nconst formatTime = (timestamp: number) => {\n\tconst date = new Date(timestamp)\n\tconst year = date.getFullYear()\n\tconst month = String(date.getMonth() + 1).padStart(2, '0')\n\tconst day = String(date.getDate()).padStart(2, '0')\n\tconst hour = String(date.getHours()).padStart(2, '0')\n\tconst minute = String(date.getMinutes()).padStart(2, '0')\n\treturn `${year}-${month}-${day} ${hour}:${minute}`\n}\n\n// 页面加载\nonLoad((options: any) => {\n\tif (options.id) {\n\t\tloadNoticeDetail(options.id)\n\t}\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.line {\n\twidth: 100%;\n\theight: 1rpx;\n\tbackground-color: #eeeeee;\n}\n\n.content {\n\tline-height: 1.8;\n\tword-wrap: break-word;\n\twhite-space: pre-wrap; /* 保留纯文本的换行 */\n}\n</style>\n","import MiniProgramPage from '/Users/jcy/code/wx/system/pages/notice/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["ref","uniCloud","uni","onLoad"],"mappings":";;;;;;AAgCM,UAAA,eAAeA,kBAAS,IAAI;AAC5B,UAAA,YAAYA,kBAAI,KAAK;AAGrB,UAAA,mBAAmB,OAAO,OAAe;AAC1C,UAAA;AACH,kBAAU,QAAQ;AAEZ,cAAA,YAAYC,cAAAA,GAAS,aAAa,QAAQ;AAChD,cAAM,MAAM,MAAM,UAAU,UAAU,EAAE,GAAI,CAAA;AAExC,YAAA,IAAI,YAAY,GAAG;AACtB,uBAAa,QAAQ,IAAI;AAAA,QAAA,OACnB;AACNC,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO,IAAI,UAAU;AAAA,YACrB,MAAM;AAAA,UAAA,CACN;AAAA,QACF;AAAA,eACQ,GAAQ;AAChBA,sBAAA,MAAI,MAAM,SAAQ,iCAAgC,SAAS,CAAC;AAC5DA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO,EAAE,WAAW;AAAA,UACpB,MAAM;AAAA,QAAA,CACN;AAAA,MAAA,UACA;AACD,kBAAU,QAAQ;AAAA,MACnB;AAAA,IAAA;AAIK,UAAA,aAAa,CAAC,cAAsB;AACnC,YAAA,OAAO,IAAI,KAAK,SAAS;AACzB,YAAA,OAAO,KAAK;AACZ,YAAA,QAAQ,OAAO,KAAK,SAAA,IAAa,CAAC,EAAE,SAAS,GAAG,GAAG;AACnD,YAAA,MAAM,OAAO,KAAK,QAAS,CAAA,EAAE,SAAS,GAAG,GAAG;AAC5C,YAAA,OAAO,OAAO,KAAK,SAAU,CAAA,EAAE,SAAS,GAAG,GAAG;AAC9C,YAAA,SAAS,OAAO,KAAK,WAAY,CAAA,EAAE,SAAS,GAAG,GAAG;AACjD,aAAA,GAAG,IAAI,IAAI,KAAK,IAAI,GAAG,IAAI,IAAI,IAAI,MAAM;AAAA,IAAA;AAIjDC,kBAAA,OAAO,CAAC,YAAiB;AACxB,UAAI,QAAQ,IAAI;AACf,yBAAiB,QAAQ,EAAE;AAAA,MAC5B;AAAA,IAAA,CACA;;;;;;;;;;;;;;;;;;AC7ED,GAAG,WAAW,eAAe;"}